!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";function a(e,t){const i=document.createElement(e);return i.id=n(t.id),i.className=n(t.className),i.innerHTML=n(t.content),i}Object.defineProperty(t,"__esModule",{value:!0}),t.buildDiv=function(e){return a("div",e)},t.buildSpan=function(e){return a("span",e)},t.buildImg=function(e){const t=document.createElement("img");return t.src=e.src,t.id=n(e.id),t.className=n(e.className),t.width=e.width||e.height,t.height=e.height||e.width,t.alt=n(e.alt),t},t.leftPad=function(e,t,i){let a=`${e}`;for(;a.length<i;)a=t+e;return a};const n=e=>e||""},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=i(2),n=i(3),r=i(4),d=i(5);i(6).deviceDataProvider.registerTimeDataProvider(a.clockUpdater),d.apiDataProvider.registerTrafficDataProvider(n.trafficUpdater),d.apiDataProvider.registerWeatherDataProvider(r.weatherUpdater),d.apiDataProvider.start()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=i(0);class n{constructor(){this.clockElem=document.querySelector("#time"),this.dateElem=document.querySelector("#date")}displayTime(e){this.clockElem.textContent=this.getTimeString(e),this.dateElem.textContent=this.getDateString(e)}getTimeString(e){const t=e.getHours(),i=e.getMinutes();return`${a.leftPad(t,"0",2)}:${a.leftPad(i,"0",2)}`}getDateString(e){return e.toLocaleDateString("en-UK",{day:"numeric",weekday:"short",month:"long"})}}t.ClockUpdater=n,t.clockUpdater=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=i(0);class n{constructor(){this.elem=document.querySelector("#traffic")}displayTraffic(e){if(this.teardown(),e&&0!==e.length){for(let t=0;t<Math.min(e.length,5);t++)this.elem.appendChild(this.buildTrafficElement(e[t],t));this.show()}else this.hide()}buildTrafficElement(e,t){if(t<0||t>4)throw new Error(`Invalid value for traffic position. Expected 0 - 4, but got ${t}`);const i=t+1,n=a.buildDiv({className:`traffic_pane traffic_${e.congestion}`,id:`traffic_${i}`});return n.appendChild(a.buildDiv({className:"travel_time_dest",content:e.end})),n.appendChild(a.buildDiv({className:"travel_time_min",content:`${Math.ceil(e.duration/60)}`})),n.appendChild(a.buildDiv({className:"travel_time_unit",content:"mins"})),e.via&&n.appendChild(a.buildDiv({className:"travel_time_via",content:e.via})),n}teardown(){this.elem.innerHTML=""}hide(){this.elem.classList.add("hidden")}show(){this.elem.classList.remove("hidden")}}t.TrafficUpdater=n,t.trafficUpdater=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=i(0);class n{constructor(){this.elem=document.querySelector("#weather")}displayWeather(e){if(this.teardown(),e&&e.primary){if(this.elem.appendChild(this.buildMainWeatherElement(e.primary)),e.alternate&&e.alternate.length>0){this.elem.appendChild(document.createElement("hr"));for(const t of e.alternate)this.elem.appendChild(this.buildAdditionalWeatherElement(t))}this.show(),this.setBackground(e.primary.condition)}else this.hide()}buildMainWeatherElement(e){const t=a.buildDiv({id:"main_weather"});return t.appendChild(a.buildDiv({id:"location",content:e.name})),t.appendChild(a.buildImg({id:"main_icon",src:e.iconUrl,width:100,height:100})),t.appendChild(a.buildDiv({id:"main_temp",content:`${Math.floor(e.temp.current)}째C`})),t.appendChild(a.buildDiv({id:"main_min_temp",className:"main_minmax_temp",content:`${Math.floor(e.temp.min)}째C`})),t.appendChild(a.buildDiv({id:"main_max_temp",className:"main_minmax_temp",content:`${Math.ceil(e.temp.max)}째C`})),t.appendChild(a.buildDiv({id:"main_condition",content:e.description})),t}buildAdditionalWeatherElement(e){const t=a.buildDiv({className:"additional_weather"});return t.appendChild(a.buildImg({className:"additional_img",src:e.iconUrl,width:40,height:40})),t.appendChild(a.buildSpan({className:"additional_loc",content:e.name})),t.appendChild(a.buildSpan({className:"additional_temp",content:`${Math.floor(e.temp.current)}째C`})),t}setBackground(e){document.querySelector("#bg").className=e}teardown(){this.elem.innerHTML=""}hide(){this.elem.classList.add("hidden")}show(){this.elem.classList.remove("hidden")}}t.WeatherUpdater=n,t.weatherUpdater=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.apiDataProvider=new class{registerWeatherDataProvider(e){this.weatherUpdater=e}registerTrafficDataProvider(e){this.trafficUpdater=e}start(){const e=async()=>{const e=await fetch("/poll"),t=await e.json();this.weatherUpdater&&this.weatherUpdater.displayWeather(t.weather),this.trafficUpdater&&this.trafficUpdater.displayTraffic(t.traffic)};e(),setInterval(e,6e4)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.deviceDataProvider=new class{registerTimeDataProvider(e){let t,i=()=>{let i=new Date,a=i.getTime();Math.floor(t/6e4)!==Math.floor(a/6e4)&&e.displayTime(i),t=a};i(),setInterval(i,500)}}}]);